<!--

    @license
    Copyright (C) 2016 - Donato Pirozzi (donatopirozzi[at]gmail[dot]com)
    This file is part of POLYWC library.

    POLYWC is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    POLYWC is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    Distributed under the GNU LGPL v3. For full terms see the file LICENSE.
    License: http://www.gnu.org/licenses/lgpl.html LGPL version 3 or higher

    Contributors:
        - Donato Pirozzi (donatopirozzi[at]gmail[dot]com)

-->

<script type="text/javascript" src="utils.js"></script>
<script>
    PagerRestBehaviour = {
        properties: {
            restUrl: { type: String, value: undefined }
        },

        /**
         * @param page is a number greater then one.
         * @param itemsPerPage
         */
        itemsLoad: function(page, itemsPerPage, externalCallback) {
            var httpGetAsync = function(theUrl, internalCallback) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (xhttp.readyState == 4 && xhttp.status == 200)
                        internalCallback(xhttp.responseText, externalCallback);
                };
                xhttp.open("GET", theUrl, true); // true for asynchronous
                xhttp.send(null);
            };//EndFunction.

            debugger;
            //Creates the URL.
            var targetUrl = this.createTargetUrl(this.restUrl, page, itemsPerPage);

            httpGetAsync(targetUrl, this.processData);
        },

        /**
         * Starting from a base url, this function creates another url
         * with the parameter on the get.
         * Note: override this function to be compatible with any other
         * @param baseUrl
         * @param page
         * @param itemsXPage
         * @returns {a string with the service url}
         */
        createTargetUrl: function(baseUrl, page, itemsXPage) {
            return this.restUrl;
        },

        processData: function(data, callback) {
            throw { name: "MustBeImplemented" };
        },

        /**
         * Starting from a base url, this function creates another url
         * with the parameter on the get.
         * Note: override this function to be compatible with any other
         * @param baseUrl
         * @param page
         * @param itemsXPage
         * @returns {*}
         * @private
         */
        /*_itemsCreateUrl: function(baseUrl, page, itemsXPage) {
            var targetUrl = replaceUrlParam(baseUrl, "page", page);
            targetUrl = replaceUrlParam(targetUrl, "itemsPerPage", itemsXPage);
            return targetUrl;
        }*/

    };
</script>